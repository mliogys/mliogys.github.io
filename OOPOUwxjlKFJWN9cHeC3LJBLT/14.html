<div class="container-fluid">
	<p>
		Objektų serializacija (informacijos paruošimas, tam tikru formatu, ją saugoti ar perduoti) svarbi tema, nes objektų serializavimas leidžia iš vienos sistemos perduoti informaciją į kitą sistemą, integruoti programas į vieną bendrą programų sistemą. Šiame skyriuje aptarsime objektų serializavimą JSON formatu. Apie JSON formatą galite susipažinti oficialioje svetainėje: <a style="color: blue; background-color: #d9dbf1;" href="https://www.json.org/ "><u>www.json.org</u></a>.
	</p>
	<p>
		Panagrinėkime pavyzdį, kaip galėtume objekto informaciją konvertuoti į informaciją JSON formatu. JSON - tekstinė informacija, esanti tarp &#132;{&#148; ir &#132;}&#148; skliaustelių ir saugoma raktažodis-reikšmė (angl. <i>key-value</i>) poromis. Serializuosime 1 pav. pavaizduotą klasę.
	</p>
	
	<p style="text-align:center; padding-right: 20px;">
		<img class="img-fluid img-thumbnail" src="pics/14_pvz_1.jpg"><br/>
		<b>1 pav. Serializuojama klasė <i>Book</i>.</b><br/>
	</p>
		
	<div class="container-fluid" style="text-align:left;">
		<button id="csharpButton1" type="button" class="btn btn-link" data-toggle="collapse" data-target="#csharp1">
			<b><u>C# pavyzdys Nr. 1</u></b> <img id="csharpToggle1" src="svg/si-glyph-arrow-down.svg" style="width:16px; height:16px;"/>
		</button>
		<div id="csharp1" class="collapse border-bottom border-dark" style="padding-bottom: 5px;">		
			<b>Klasė <i>Book</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k1>class</k1> <k2>Book</k2><br>
				<n>2. </n><t/>{<br>
				<n>3. </n><t/><t/><k1>public string</k1> title;<br>
				<n>4. </n><t/><t/><k1>public string</k1> author;<br>
				<n>5. </n><t/><t/><k1>public int</k1> publishYear;<br>
				<n>6. </n><t/><t/><k1>public int</k1> pagesNumber;<br>
				<n>7. </n><t/><br>
				<n>8. </n><t/><t/><k1>public string</k1> ToJSON()<br>
				<n>9. </n><t/><t/>{<br>
				<n>10.</n><t/><t/><t/><k1>string</k1> jsonString = <quot>$&quot;{{ &quot;</quot> +<br>
				<n>11.</n><t/><t/><t/><t/><quot>$&quot;\&quot;title\&quot;:\&quot;</quot>{title}<quot>\&quot;, &quot;</quot> +<br>
				<n>12.</n><t/><t/><t/><t/><quot>$&quot;\&quot;author\&quot;:\&quot;</quot>{author}<quot>\&quot;, &quot;</quot> +<br>
				<n>13.</n><t/><t/><t/><t/><quot>$&quot;\&quot;publishYear\&quot;:</quot>{publishYear}<quot>, &quot;</quot> +<br>
				<n>14.</n><t/><t/><t/><t/><quot>$&quot;\&quot;pagesNumber\&quot;:</quot>{pagesNumber}<quot>&quot;</quot> +<br>
				<n>15.</n><t/><t/><t/><t/><quot>$&quot; }}&quot;</quot>;<br>
				<n>16.</n><t/><t/><t/><k1>return</k1> jsonString;<br>
				<n>17.</n><t/><t/>}<br>
				<n>18.</n><t/>}
			</div>
			<b>Metodas <i>Main()</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k2>Book</k2> book = <k1>new</k1> <k2>Book</k2>()<br>
				<n>2. </n><t/>{<br>
				<n>3. </n><t/><t/>author = <quot>&quot;Matthew D. Groves&quot;</quot>,<br>
				<n>4. </n><t/><t/>title = <quot>&quot;AOP in .NET&quot;</quot>,<br>
				<n>5. </n><t/><t/>pagesNumber = 274,<br>
				<n>6. </n><t/><t/>publishYear = 2013<br>
				<n>7. </n><t/>};<br>
				<n>8. </n><t/><br>
				<n>9. </n><t/><k2>Console</k2>.WriteLine(book.ToJSON());<br>
			</div>	
		</div>
	</div>
	
	<div class="container-fluid" style="text-align:left;">
		<button id="javaButton1" type="button" class="btn btn-link" data-toggle="collapse" data-target="#java1">
			<b><u>Java pavyzdys Nr. 1</u></b> <img id="javaToggle1" src="svg/si-glyph-arrow-down.svg" style="width:16px; height:16px;"/>
		</button>
		<div id="java1" class="collapse border-bottom border-dark" style="padding-bottom: 5px;">		
			<b>Klasė <i>Book</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k1>class</k1> <k2>Book</k2> {<br>
				<n>2. </n><t/><t/><k1>public String</k1> title;<br>
				<n>3. </n><t/><t/><k1>public String</k1> author;<br>
				<n>4. </n><t/><t/><k1>public int</k1> publishYear;<br>
				<n>5. </n><t/><t/><k1>public int</k1> pagesNumber;<br>
				<n>6. </n><t/><br>
				<n>7. </n><t/><t/><k1>public String</k1> toJSON() {<br>
				<n>8. </n><t/><t/><t/><k1>String</k1> jsonString = <quot>&quot;{ &quot;</quot> +<br>
				<n>9. </n><t/><t/><t/><t/><quot>&quot;\&quot;title\&quot;:\&quot;&quot;</quot> + title + <quot>&quot;\&quot;, &quot;</quot> +<br>
				<n>10.</n><t/><t/><t/><t/><quot>&quot;\&quot;author\&quot;:\&quot;&quot;</quot> + author + <quot>&quot;\&quot;, &quot;</quot> +<br>
				<n>11.</n><t/><t/><t/><t/><quot>&quot;\&quot;publishYear\&quot;:&quot;</quot> + publishYear + <quot>&quot;, &quot;</quot> +<br>
				<n>12.</n><t/><t/><t/><t/><quot>&quot;\&quot;pagesNumber\&quot;:&quot;</quot> + pagesNumber + <quot>&quot;&quot;</quot> +<br>
				<n>13.</n><t/><t/><t/><t/><quot>&quot; }&quot;</quot>;<br>
				<n>14.</n><t/><t/><t/><k1>return</k1> jsonString;<br>
				<n>15.</n><t/><t/>}<br>
				<n>16.</n><t/>}
			</div>
			<b>Metodas <i>Main()</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k2>Book</k2> book = <k1>new</k1> <k2>Book</k2>();<br>
				<n>2. </n><t/>book.author = <quot>&quot;Matthew D. Groves&quot;</quot>;<br>
				<n>3. </n><t/>book.title = <quot>&quot;AOP in .NET&quot;</quot>;<br>
				<n>4. </n><t/>book.pagesNumber = 274;<br>
				<n>5. </n><t/>book.publishYear = 2013;<br>
				<n>6. </n><t/><br>
				<n>7. </n><t/><k2>System</k2>.out.println(book.ToJSON());<br>
			</div>
		</div>
	</div>
	
	<div class="container-fluid" style="text-align:left;">
		<button id="pythonButton1" type="button" class="btn btn-link" data-toggle="collapse" data-target="#python1">
			<b><u>Python pavyzdys Nr. 1</u></b> <img id="pythonToggle1" src="svg/si-glyph-arrow-down.svg" style="width:16px; height:16px;"/>
		</button>
		<div id="python1" class="collapse border-bottom border-dark" style="padding-bottom: 5px;">		
			<b>Klasė Book:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k1>class</k1> <k2>Book</k2>:<br>
				<n>2. </n><t/><t/><k1>def</k1> __init__(<k2>self</k2>, author, title, publishYear, pagesNumber):<br>
				<n>3. </n><t/><t/><t/><k2>self</k2>.author = author<br>
				<n>4. </n><t/><t/><t/><k2>self</k2>.title = title<br>
				<n>5. </n><t/><t/><t/><k2>self</k2>.publishYear = publishYear<br>
				<n>6. </n><t/><t/><t/><k2>self</k2>.pagesNumber = pagesNumber<br>
				<n>7. </n><br>
				<n>8. </n><t/><t/><k1>def</k1> to_json(<k2>self</k2>):<br>
				<n>9. </n><t/><t/><t/>json_string = <quot>&quot;&quot;&quot;{{ </quot><br>
				<n>10.</n><t/><t/><t/><t/><quot>\&quot;title\&quot;:\&quot;{0}\&quot;</quot>,<br>
				<n>11.</n><t/><t/><t/><t/><quot>\&quot;author\&quot;:\&quot;{1}\&quot;</quot>,<br>
				<n>12.</n><t/><t/><t/><t/><quot>\&quot;publishYear\&quot;:{2}</quot>,<br>
				<n>13.</n><t/><t/><t/><t/><quot>\&quot;pagesNumber\&quot;:{3}</quot><br>
				<n>14.</n><t/><t/><t/><t/><quot>}}&quot;&quot;&quot;</quot>.format(<k2>self</k2>.title, <k2>self</k2>.author, <k2>self</k2>.publishYear, <k2>self</k2>.pagesNumber)<br>
				<n>15.</n><t/><t/><t/><k1>return</k1> json_string
			</div>
			<b>Klasė Main:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/>book = <k2>Book</k2>(<quot>&quot;Matthew D. Groves&quot;</quot>, <quot>&quot;AOP in .NET&quot;</quot>, 2013, 274)<br>
				<n>2. </n><t/>print(book.to_json())<br>
			</div>
		</div>
	</div>
	
	<p>
		Pirmajame pavyzdyje, patys pasirašėme savo, informacijos konvertavimo į JSON formatą, metodą, tačiau šis būdas sukelia daug problemų: galima neteisingai suformuoti JSON formatą (visada galima pasitikrinti <a style="color: blue; background-color: #d9dbf1;" href="https://jsonlint.com/"><u>jsonlint.com</u></a> svetainėje), didelius objektus serializuoti labai sudėtinga dėl sąryšių su kitais objektais. Deserializuoti informaciją yra dar sudėtingesnis veiksmas, dėl to, laimei, jau yra sukurtų ir paruoštų naudoti įrankių serializavimo ir deserializavimo problemoms spręsti. Apžvelkime šiuos serializavimo įrankius.
	</p>
	
	<div class="container-fluid" style="text-align:left;">
		<button id="csharpButton2" type="button" class="btn btn-link" data-toggle="collapse" data-target="#csharp2">
			<b><u>C# pavyzdys Nr. 2</u></b> <img id="csharpToggle2" src="svg/si-glyph-arrow-down.svg" style="width:16px; height:16px;"/>
		</button>
		<div id="csharp2" class="collapse border-bottom border-dark" style="padding-bottom: 5px;">		
			<b>Klasė <i>Book</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k2>[DataContract]</k2><br>
				<n>2. </n><t/><k1>class</k1> <k2>Book</k2><br>
				<n>3. </n><t/>{<br>
				<n>4. </n><t/><t/><k2>[DataMember]</k2><br>
				<n>5. </n><t/><t/><k1>public string</k1> title;<br>
				<n>6. </n><t/><t/><k2>[DataMember]</k2><br>
				<n>7. </n><t/><t/><k1>public string</k1> author;<br>
				<n>8. </n><t/><t/><k2>[DataMember]</k2><br>
				<n>9. </n><t/><t/><k1>public int</k1> publishYear;<br>
				<n>10.</n><t/><t/><k2>[DataMember]</k2><br>
				<n>11.</n><t/><t/><k1>public int</k1> pagesNumber;<br>
				<n>12.</n><t/>}
			</div>
			<b>Metodas <i>Main()</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k2>Book</k2> book = <k1>new</k1> <k2>Book</k2>()<br>
				<n>2. </n><t/>{<br>
				<n>3. </n><t/><t/>author = <quot>&quot;Matthew D. Groves&quot;</quot>,<br>
				<n>4. </n><t/><t/>title = <quot>&quot;AOP in .NET&quot;</quot>,<br>
				<n>5. </n><t/><t/>pagesNumber = 274,<br>
				<n>6. </n><t/><t/>publishYear = 2013<br>
				<n>7. </n><t/>};<br>
				<n>8. </n><t/><br>
				<n>9. </n><t/><comm>// Serializavimas</comm><br>
				<n>10.</n><t/><k2>MemoryStream</k2> ms = <k1>new</k1> <k2>MemoryStream</k2>();<br>
				<n>11.</n><t/><k2>DataContractJsonSerializer</k2> serializer = <k1>new</k1> <k2>DataContractJsonSerializer</k2>(<k1>typeof</k1>(<k2>Book</k2>));<br>
				<n>12.</n><t/>serializer.WriteObject(ms, book);<br>
				<n>13.</n><t/>ms.Position = 0;<br>
				<n>14.</n><t/><k2>StreamReader</k2> sr = <k1>new</k1> <k2>StreamReader</k2>(ms);<br>
				<n>15.</n><t/><k2>Console</k2>.WriteLine(sr.ReadToEnd()); <comm>// Išvedama JSON formatu</comm><br>
				<n>16.</n><t/><br>
				<n>17.</n><t/><comm>// Deserializavimas</comm><br>
				<n>18.</n><t/>ms.Position = 0;<br>
				<n>19.</n><t/><k2>Book</k2> deserializedBook = (<k2>Book</k2>)serializer.ReadObject(ms); <comm>// Iš JSON konvertuota į <i>Book</i> objektą</comm><br>
			</div>		
		</div>
	</div>
	
	<div class="container-fluid" style="text-align:left;">
		<button id="javaButton2" type="button" class="btn btn-link" data-toggle="collapse" data-target="#java2">
			<b><u>Java pavyzdys Nr. 2</u></b> <img id="javaToggle2" src="svg/si-glyph-arrow-down.svg" style="width:16px; height:16px;"/>
		</button>
		<div id="java2" class="collapse border-bottom border-dark" style="padding-bottom: 5px;">	
			<p>
				Darbui su JSON objektais, Java kalboje, rekomenduojama naudoti GSON biblioteką, kurią galima parsisiųsti iš <a style="color: blue; background-color: #d9dbf1;" href="https://repo1.maven.org/maven2/com/google/code/gson/gson/"><u>https://repo1.maven.org</u></a> svetainės. Toliau pateiktas pavyzdys remiasi šia biblioteka.
			</p>
			<b>Klasė <i>Book</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k1>class</k1> <k2>Book</k2> {<br>
				<n>2. </n><t/><t/><k1>public String</k1> title;<br>
				<n>3. </n><t/><t/><k1>public String</k1> author;<br>
				<n>4. </n><t/><t/><k1>public int</k1> publishYear;<br>
				<n>5. </n><t/><t/><k1>public int</k1> pagesNumber;<br>
				<n>6. </n><t/>}
			</div>
			<b>Metodas <i>Main()</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k2>Book</k2> book = <k1>new</k1> <k2>Book</k2>();<br>
				<n>2. </n><t/>book.author = <quot>&quot;Matthew D. Groves&quot;</quot>;<br>
				<n>3. </n><t/>book.title = <quot>&quot;AOP in .NET&quot;</quot>;<br>
				<n>4. </n><t/>book.pagesNumber = 274;<br>
				<n>5. </n><t/>book.publishYear = 2013;<br>
				<n>6. </n><t/><br>
				<n>7. </n><t/><k2>GsonBuilder</k2> builder = <k1>new</k1> <k2>GsonBuilder</k2>();<br>
				<n>8. </n><t/>builder.setPrettyPrinting();<br>
				<n>9. </n><t/><k2>Gson</k2> gson = builder.create();<br>
				<n>10.</n><t/><br>
				<n>11.</n><t/><comm>// Serializavimas</comm><br>
				<n>12. </n><t/><k1>String</k1> jsonString = gson.toJson(book);<br> 
				<n>13.</n><t/><k2>System</k2>.out.println(book); <comm>// Išvedama objekto informacija JSON formatu</comm><br>
				<n>14.</n><br>
				<n>15.</n><t/><comm>// Deserializavimas</comm><br>
				<n>16.</n><t/><k2>Book</k2> deserializedBook = gson.fromJson(jsonString, <k2>Student<k2>.class); <comm>// Iš JSON konvertuota į <i>Book</i> objektą</comm><br>
			</div>
		</div>
	</div>
	
	<div class="container-fluid" style="text-align:left;">
		<button id="pythonButton2" type="button" class="btn btn-link" data-toggle="collapse" data-target="#python2">
			<b><u>Python pavyzdys Nr. 2</u></b> <img id="pythonToggle2" src="svg/si-glyph-arrow-down.svg" style="width:16px; height:16px;"/>
		</button>
		<div id="python2" class="collapse border-bottom border-dark" style="padding-bottom: 5px;">	
			<b>Klasė <i>Book</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k1>class</k1> <k2>Book</k2>:<br>
				<n>2. </n><t/><t/><k1>def</k1> __init__(<k2>self</k2>, author, title, publishYear, pagesNumber):<br>
				<n>3. </n><t/><t/><t/><k2>self</k2>.author = author<br>
				<n>4. </n><t/><t/><t/><k2>self</k2>.title = title<br>
				<n>5. </n><t/><t/><t/><k2>self</k2>.publishYear = publishYear<br>
				<n>6. </n><t/><t/><t/><k2>self</k2>.pagesNumber = pagesNumber<br>
			</div>
			<b>Klasė <i>Main</i>:</b>
			<div class="code" style="vertical-align:top; text-align: left;">
				<n>1. </n><t/><k1>import</k1> json<br>
				<n>2. </n><t/><k1>from</k1> collections <k1>import</k1> namedtuple<br>
				<n>3. </n><t/><br>
				<n>4. </n><t/>book = <k2>Book</k2>(<quot>&quot;Matthew D. Groves&quot;</quot>, <quot>&quot;AOP in .NET&quot;</quot>, 2013, 274)<br>
				<n>5. </n><br>
				<n>6. </n><t/><comm># Serializavimas</comm><br>
				<n>7. </n><t/>jsonString = json.dumps(book.__dict__)<br>
				<n>8. </n><t/>print(jsonString) <comm># Išvedama objekto informacija JSON formatu</comm><br>
				<n>9. </n><t/><br>
				<n>10.</n><t/><comm># Deserializavimas</comm><br>
				<n>11.</n><t/><comm># Iš JSON konvertuojama į objektą</comm><br>
				<n>11.</n><t/>deserialized = json.loads(jsonString, object_hook=lambda d: namedtuple('X', d.keys())(*d.values()))<br>
			</div>
		</div>
	</div>
		
	<p>
		Kaip matome, paruoštų įrankių naudojimas žymiai palengvina serializavimo/deserializavimo operacijas.
	</p>
	
	<hr/>
	<div class="row" style="display: table;">
		<div style="vertical-align:top; text-align: right; width:100px;">
			<img class="img-fluid" src="pics/www.png">
		</div>
		<div style="vertical-align:midle; display: table-cell; padding-left: 10px;">
			<b>Daugiau informacijos apie objektų serializaciją:</b>
		</div>
	</div>
	<div style="text-align:left; padding-left: 20px;">		
		<div class="list-group" style="text-align:left;">
			<a style="padding:10px; color: blue; background-color: #d9dbf1;" href="https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/how-to-serialize-and-deserialize-json-data" class="list-group-item list-group-item-action"><u><b>C# JSON serializacija</b> (nuoroda į C# techninę dokumentaciją)</u></a>
			<a style="padding:10px; color: blue; background-color: #d9dbf1;" href="https://www.tutorialspoint.com/gson/index.htm" class="list-group-item list-group-item-action"><u><b>Java JSON serializacija</b> (nuoroda į TutorialsPoint svetainę)</u></a>
			<a style="padding:10px; color: blue; background-color: #d9dbf1;" href="https://docs.python.org/3.7/library/json.html" class="list-group-item list-group-item-action"><u><b>Python JSON serializacija</b> (nuoroda į Python techninę dokumentaciją)</u></a>
		</div>
	</div>
	<hr/>
	
</div>